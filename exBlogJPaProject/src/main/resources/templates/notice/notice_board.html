<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>공지사항 게시판</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>

    <div th:replace="~{fragments/sidebar :: sidebar}"></div>

    <div class="main-container">
        <div th:replace="~{fragments/header :: header}"></div>

        <div class="section-box notice-page">
            <h3 class="page-title">
                <span>📢</span> 공지사항
            </h3>
            
            <div class="board-info">
                전체 : <b th:text="${totcount}">0</b>건 - <span th:text="${page}">1</span> / <span th:text="${totpage}">1</span> Pages
            </div>

            <table class="board-table">
                <thead>
                    <tr>
                        <th width="10%">번 호</th>
                        <th width="50%">제 목</th>
                        <th width="15%">글쓴이</th>
                        <th width="15%">작성일</th>
                        <th width="10%">조회수</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="notice : ${nlist}">
                        <td th:text="${notice.idx}">번호</td>
                        <td class="text-left">
                            <span th:if="${notice.isTop == 1}" class="notice-badge">[공지]</span>
                            <a th:href="@{/notice/notice_view(idx=${notice.idx}, page=${page})}" class="board-link">
                                <span th:text="${notice.title}">제목</span>
                            </a>
                        </td>
                        <td th:text="${notice.writer_id}">관리자</td>
                        <td th:text="${#temporals.format(notice.regdate, 'yyyy-MM-dd')}">2026-01-08</td>
                        <td th:text="${notice.readcnt}">0</td> 
                    </tr>
                    <tr th:if="${#lists.isEmpty(nlist)}">
                        <td colspan="5" class="no-data">등록된 게시글이 없습니다.</td>
                    </tr>
                </tbody>
            </table>

            <div class="search-area" style="margin-top: 20px; text-align: center;">
                <form th:action="@{/notice/notice_board}" method="get">
                    <select name="search" class="search-select" style="padding: 8px; border-radius: 4px; border: 1px solid #ddd;">
                        <option value="title" th:selected="${search == 'title'}">제목</option>
                        <option value="content" th:selected="${search == 'content'}">내용</option>
                    </select>
                    <input type="text" name="key" th:value="${key}" placeholder="검색어 입력" 
                           class="search-input" style="padding: 8px; width: 250px; border-radius: 4px; border: 1px solid #ddd;">
                    <button type="submit" class="btn-search" 
                            style="padding: 8px 15px; background-color: #3498db; color: white; border: none; border-radius: 4px; cursor: pointer;">
                        검색
                    </button>
                </form>
            </div>

            <div class="board-footer">
                <div class="pagination">
                    <th:block th:each="p : ${#numbers.sequence(1, totpage)}">
                        <a th:href="@{/notice/notice_board(page=${p}, search=${search}, key=${key})}" 
                           th:text="${p}" 
                           th:classappend="${p == page} ? 'active' : ''"
                           style="margin: 0 5px; text-decoration: none; color: #333;"></a>
                    </th:block>
                </div>

                <div class="action-buttons">
                    <th:block th:if="${session.user != null and (session.user.role == 1 or session.user.role == '1')}">
                        <a th:href="@{/notice/notice_write(page=${page})}" class="btn-write">글쓰기</a>
                    </th:block>
                </div>
            </div>
        </div>

        <footer style="text-align: center; color: #bbb; margin-top: auto; padding: 40px 0;">
            <p>© 2026 개인 블로그. All rights reserved.</p>
        </footer>
    </div>

</body>
</html>