<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>íšŒì›ê°€ì…</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    
    <script th:inline="javascript">
        // ê¸°ì¡´ jQuery ë¡œì§ (ì•„ì´ë”” ì¤‘ë³µì²´í¬, SMS ì¸ì¦ ë“±) ê·¸ëŒ€ë¡œ ìœ ì§€
        $(function(){
            $("#smscheck").hide(); 

            $("#idCheckBtn").click(function(){
                var userid = $("#userid").val();
                if(userid == "") { alert("ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."); $("#userid").focus(); return; }
                $.ajax({
                    url: '/login/login_idcheck',
                    type: 'post',
                    data: { "userid" : userid },
                    success: function(result){
                        if(result == 0) {
                            $("#userID_c").text("ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.").css("color", "blue");
                        } else {
                            $("#userID_c").text("ì¤‘ë³µëœ ì•„ì´ë””ì…ë‹ˆë‹¤.").css("color", "red");
                            $("#userid").val('').focus();
                        }
                    },
                    error: function() { alert("ì„œë²„ í†µì‹  ì‹¤íŒ¨!"); }
                });
            });

            $("#passwd, #repasswd").on("keyup change", function(){
                var pw = $("#passwd").val();
                var repw = $("#repasswd").val();
                if(pw == "" && repw == "") {
                    $("#repasswd_c").text("í•œë²ˆë” ì…ë ¥í•´ì£¼ì„¸ìš”").css("color", "#888");
                } else if(pw == repw) {
                    $("#repasswd_c").text("ë¹„ë°€ë²ˆí˜¸ ì¼ì¹˜í•©ë‹ˆë‹¤").css("color", "blue");
                } else {
                    $("#repasswd_c").text("ë¹„ë°€ë²ˆí˜¸ê°€ ë¶ˆì¼ì¹˜").css("color", "red");
                }
            });

            $("#phoneBtn1").click(function(){
                var tel = $("#tel").val();
                if(tel == '') { alert("ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."); return; }
                $.ajax({
                    url: '/login/login_sms',
                    type: 'post',
                    data: { "tel" : tel },
                    success: function(result){
                        alert("ì¸ì¦ë²ˆí˜¸ê°€ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤!");
                        $("#usersms_hidden").val(result); 
                        $("#smscheck").show(); 
                    },
                    error: function() { alert("ë¬¸ì ë°œì†¡ ì‹¤íŒ¨!"); }
                });
            });

            $("#phoneBtn3").click(function(){
                var inputSms = $("#resms").val();
                var hiddenSms = $("#usersms_hidden").val();
                if(inputSms == hiddenSms && inputSms != "") {
                    $("#resms_c").text("ì¸ì¦ ì„±ê³µ!").css("color", "blue");
                } else {
                    $("#resms_c").text("ì¸ì¦ ì‹¤íŒ¨.").css("color", "red");
                    $("#resms").val('').focus();
                }
            });

            $("#userSend").click(function(){
                if($("#name").val()==''){ alert("ì´ë¦„ì„ ì¨ì¤˜!"); return; }
                if($("#userID_c").text().indexOf("ê°€ëŠ¥") == -1){ alert("ì•„ì´ë”” ì¤‘ë³µí™•ì¸ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”."); return; }
                if($("#resms_c").text() != "ì¸ì¦ ì„±ê³µ!") { alert("SMS ì¸ì¦ í™•ì¸ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”."); return; }
                alert("íšŒì›ê°€ì…ì„ í™˜ì˜í•´");
                $("#userForm").submit();
            });

            $("#userReset").click(function(){
                if(confirm("ì…ë ¥í•œ ë‚´ìš©ì„ ì´ˆê¸°í™”í• ê¹Œ?")) {
                    $("#userForm")[0].reset();
                    $("#userID_c, #repasswd_c, #resms_c").text('');
                }
            });
            
            $("#email3").change(function(){
                if($(this).val() != "0") {
                    $("#email2").val($(this).val()).attr("readonly", true);
                } else {
                    $("#email2").val('').attr("readonly", false).focus();
                }
            });
        }); 
    </script>
</head>
<body>

    <div th:replace="~{fragments/sidebar :: sidebar}"></div>

    <div class="main-container">
        
        <div th:replace="~{fragments/header :: header}"></div>

        <div class="section-box join-page">
            <h3 class="page-title">ğŸ‘¤ ì‚¬ìš©ì ë“±ë¡</h3>
            <p class="page-subtitle"><span class="required">*</span> í‘œì‹œí•­ëª©ì€ ë°˜ë“œì‹œ ì…ë ¥í•˜ì‹­ì‹œìš”.</p>
            <hr class="title-hr">

            <form id="userForm" method="post" th:action="@{/login/login_insert_pro}">
                <input type="hidden" id="usersms_hidden" name="usersms">
                
                <table class="form-table">
                    <tr>
                        <td class="label-cell">íšŒì› ì„±ëª… <span class="required">*</span></td>
                        <td class="input-cell"><input type="text" name="name" id="name" class="form-control" placeholder="ì„±ëª…ì„ ì…ë ¥í•˜ì„¸ìš”."></td>
                    </tr>
                    <tr>
                        <td class="label-cell">íšŒì› ID <span class="required">*</span></td>
                        <td class="input-cell">
                            <div class="input-group">
                                <input type="text" name="id" id="userid" class="form-control" style="width: 200px;">
                                <button type="button" id="idCheckBtn" class="btn-check">ì¤‘ë³µí™•ì¸</button>
                                <span id="userID_c" class="msg-text">5~16ì ì˜ë¬¸/ìˆ«ì ì¡°í•©</span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="label-cell">ë¹„ë°€ë²ˆí˜¸ <span class="required">*</span></td>
                        <td class="input-cell">
                            <input type="password" name="pw" id="passwd" class="form-control" style="width: 250px;">
                        </td>
                    </tr>
                    <tr>
                        <td class="label-cell">ë¹„ë°€ë²ˆí˜¸ í™•ì¸ <span class="required">*</span></td>
                        <td class="input-cell">
                            <div class="input-group">
                                <input type="password" id="repasswd" class="form-control" style="width: 250px;">
                                <span id="repasswd_c" class="msg-text">ë™ì¼í•˜ê²Œ í•œ ë²ˆ ë” ì…ë ¥í•´ì¤˜.</span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="label-cell">ì „í™”ë²ˆí˜¸ <span class="required">*</span></td>
                        <td class="input-cell">
                            <div class="input-group">
                                <input type="text" name="tel" id="tel" class="form-control" style="width: 200px;" placeholder="(- ì œì™¸)">
                                <button type="button" id="phoneBtn1" class="btn-check">ì¸ì¦ë²ˆí˜¸ë°›ê¸°</button>
                            </div>
                        </td>
                    </tr>
                    <tr id="smscheck">
                        <td class="label-cell">ì¸ì¦ë²ˆí˜¸ í™•ì¸ <span class="required">*</span></td>
                        <td class="input-cell">
                            <div class="input-group">
                                <input type="text" id="resms" class="form-control" style="width: 200px;" placeholder="ì¸ì¦ë²ˆí˜¸ ì…ë ¥">
                                <button type="button" id="phoneBtn3" class="btn-check">ì¸ì¦í™•ì¸</button>
                                <span id="resms_c" class="msg-text"></span>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="label-cell">E-mail</td>
                        <td class="input-cell">
                            <div class="input-group">
                                <input type="text" name="email1" id="email1" class="form-control" style="width: 120px;">
                                <span>@</span>
                                <input type="text" name="email2" id="email2" class="form-control" style="width: 150px;">
                                <select id="email3" class="form-control" style="width: 150px;">
                                    <option value="0">ì§ì ‘ì…ë ¥</option>
                                    <option value="naver.com">naver.com</option>
                                    <option value="daum.net">daum.net</option>
                                    <option value="gmail.com">gmail.com</option>
                                </select>
                            </div>
                        </td>
                    </tr>
                </table>
	
                <div class="btn-area">
                    <button type="button" id="userSend" class="btn-submit">íšŒì›ê°€ì… í•˜ê¸°</button>
                    <button type="button" id="userReset" class="btn-reset">ë‹¤ì‹œ ì“°ê¸°</button>
                </div>
            </form>
        </div>
	
        <footer style="text-align: center; color: #bbb; padding: 40px 0;">
            <p>Â© 2026 ê°œì¸ ë¸”ë¡œê·¸. All rights reserved.</p>
        </footer>
    </div>
</body>
</html>