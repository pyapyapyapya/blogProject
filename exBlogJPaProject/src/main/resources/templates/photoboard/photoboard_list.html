<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>자유게시판</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>

    <div th:replace="~{fragments/sidebar :: sidebar}"></div>

    <div class="main-container">
        <div th:replace="~{fragments/header :: header}"></div>

        <div class="section-box photo-board-page">
            <h3 class="page-title">
                <span>📸</span> 자유 게시판
            </h3>
            
            <div class="board-info">
                전체 : <b th:text="${totcount}">0</b>건 - <span th:text="${page}">1</span>/ <span th:text="${totpage}">1</span> Pages
            </div>

            <table class="board-table">
                <thead>
                    <tr>
                        <th width="8%">번 호</th>
                        <th width="52%">제 목</th> <th width="15%">글쓴이</th>
                        <th width="15%">작성일</th>
                        <th width="10%">조회수</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="photo : ${plist}">
                        <td th:text="${photo.idx}">번호</td>
                        <td class="text-left">
                            <a th:href="@{/photoboard/photoboard_view(idx=${photo.idx}, page=${page})}" class="board-link">
                                <span th:text="${photo.title}">제목</span>
                            </a>
                            <span th:if="${photo.photo != null and photo.photo != ''}" class="photo-icon">🖼️</span>
                        </td>
                        <td th:text="${photo.writer_id}">작성자</td>
                        <td th:text="${#temporals.format(photo.regdate, 'yyyy-MM-dd')}">2026-01-07</td>
                        <td th:text="${photo.hits}">0</td>
                    </tr>
                    <tr th:if="${#lists.isEmpty(plist)}">
                        <td colspan="5" class="no-data">등록된 게시글이 없습니다.</td>
                    </tr>
                </tbody>
            </table> <div class="search-area" style="margin-top: 30px; text-align: center; clear: both;">
                <form th:action="@{/photoboard/photoboard_list}" method="get">
                    <select name="search" class="search-select">
                        <option value="title" th:selected="${search == 'title'}">제목</option>
                        <option value="content" th:selected="${search == 'content'}">내용</option>
                        <option value="writer_id" th:selected="${search == 'writer_id'}">작성자</option>
                    </select>
                    <input type="text" name="key" th:value="${key}" placeholder="검색어 입력" class="search-input">
                    <button type="submit" class="btn-search">검색</button>
                </form>
            </div>

            <div class="board-footer">
                <div class="pagination">
                    <th:block th:if="${totpage > 0}" th:each="p : ${#numbers.sequence(1, totpage)}">
                        <a th:href="@{/photoboard/photoboard_list(page=${p}, key=${key}, search=${search})}" 
                           th:text="${p}" 
                           th:classappend="${p == page} ? 'active' : ''"
                           style="margin: 0 5px;"></a>
                    </th:block>
                </div>

                <div class="action-buttons">
                    <th:block th:if="${session.user != null}">
                        <a th:href="@{/photoboard/photoboard_write(page=${page})}" class="btn-write">글 쓰기</a>
                    </th:block>
                </div>
            </div>
        </div> <footer style="text-align: center; color: #bbb; margin-top: auto; padding: 40px 0;">
            <p>© 2026 개인 블로그. All rights reserved.</p>
        </footer>
    </div> </body>
</html>